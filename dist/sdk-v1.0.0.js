module.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=20)}([function(e,t,n){"use strict";e.exports={STATUS_CODE:{CREATED:201,SUCCESS:200,UPDATE:200,PATCH:200,DELETE:204,UNAUTHORIZED:401,NOT_FOUND:404,SERVER_ERROR:500},httpMethodCodeMap:{GET:200,POST:201,PUT:200,PATCH:200,DELETE:204},PARDON_TIME_KEY:"pardon",PARDON_TIME:1800,SIGNATURE_KEY:"X-MiniApp-Plugin-Signature",STORAGE_PREFIX_KEY:"ifx_plugin_license_",LICENSE_STORAGE_KEY:"license",LAST_FETCH_TIME:"last_fetch",API_HOST:"https://api.xiaoapp.io",PLAN_TYPE:{EVALUATION:"EVALUATION",FREE:"FREE",FREEMIUM:"FREEMIUM",COMMERCIAL:"COMMERCIAL"}}},function(e,t,n){"use strict";function r(e,t){if(!e)throw new Error(t||"Assertion failed")}e.exports=r,r.equal=function(e,t,n){if(e!=t)throw new Error(n||"Assertion failed: "+e+" != "+t)}},function(e,t,n){"use strict";var r=n(1),o=n(13);function i(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function u(e){return 1===e.length?"0"+e:e}function a(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}t.inherits=o,t.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var n=[];if("string"==typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),r=0;r<e.length;r+=2)n.push(parseInt(e[r]+e[r+1],16))}else for(var r=0;r<e.length;r++){var o=e.charCodeAt(r),i=o>>8,u=255&o;i?n.push(i,u):n.push(u)}else for(r=0;r<e.length;r++)n[r]=0|e[r];return n},t.toHex=function(e){for(var t="",n=0;n<e.length;n++)t+=u(e[n].toString(16));return t},t.htonl=i,t.toHex32=function(e,t){for(var n="",r=0;r<e.length;r++){var o=e[r];"little"===t&&(o=i(o)),n+=a(o.toString(16))}return n},t.zero2=u,t.zero8=a,t.join32=function(e,t,n,o){var i=n-t;r(i%4==0);for(var u=new Array(i/4),a=0,c=t;a<u.length;a++,c+=4){var s;s="big"===o?e[c]<<24|e[c+1]<<16|e[c+2]<<8|e[c+3]:e[c+3]<<24|e[c+2]<<16|e[c+1]<<8|e[c],u[a]=s>>>0}return u},t.split32=function(e,t){for(var n=new Array(4*e.length),r=0,o=0;r<e.length;r++,o+=4){var i=e[r];"big"===t?(n[o]=i>>>24,n[o+1]=i>>>16&255,n[o+2]=i>>>8&255,n[o+3]=255&i):(n[o+3]=i>>>24,n[o+2]=i>>>16&255,n[o+1]=i>>>8&255,n[o]=255&i)}return n},t.rotr32=function(e,t){return e>>>t|e<<32-t},t.rotl32=function(e,t){return e<<t|e>>>32-t},t.sum32=function(e,t){return e+t>>>0},t.sum32_3=function(e,t,n){return e+t+n>>>0},t.sum32_4=function(e,t,n,r){return e+t+n+r>>>0},t.sum32_5=function(e,t,n,r,o){return e+t+n+r+o>>>0},t.sum64=function(e,t,n,r){var o=e[t],i=r+e[t+1]>>>0,u=(i<r?1:0)+n+o;e[t]=u>>>0,e[t+1]=i},t.sum64_hi=function(e,t,n,r){return(t+r>>>0<t?1:0)+e+n>>>0},t.sum64_lo=function(e,t,n,r){return t+r>>>0},t.sum64_4_hi=function(e,t,n,r,o,i,u,a){var c=0,s=t;return c+=(s=s+r>>>0)<t?1:0,c+=(s=s+i>>>0)<i?1:0,e+n+o+u+(c+=(s=s+a>>>0)<a?1:0)>>>0},t.sum64_4_lo=function(e,t,n,r,o,i,u,a){return t+r+i+a>>>0},t.sum64_5_hi=function(e,t,n,r,o,i,u,a,c,s){var f=0,l=t;return f+=(l=l+r>>>0)<t?1:0,f+=(l=l+i>>>0)<i?1:0,f+=(l=l+a>>>0)<a?1:0,e+n+o+u+c+(f+=(l=l+s>>>0)<s?1:0)>>>0},t.sum64_5_lo=function(e,t,n,r,o,i,u,a,c,s){return t+r+i+a+s>>>0},t.rotr64_hi=function(e,t,n){return(t<<32-n|e>>>n)>>>0},t.rotr64_lo=function(e,t,n){return(e<<32-n|t>>>n)>>>0},t.shr64_hi=function(e,t,n){return e>>>n},t.shr64_lo=function(e,t,n){return(e<<32-n|t>>>n)>>>0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o={appId:"",pluginId:"",version:"",secretKey:""},i=t.RuntimeConfig=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.keys(o).forEach(function(e){t[e]=o[e]})}return r(e,[{key:"set",value:function(e,t){this[e]=t}},{key:"get",value:function(e){return this[e]}}]),e}();t.default=new i},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=u(n(0)),i=u(n(16));function u(e){return e&&e.__esModule?e:{default:e}}e.exports={wxRequestFail:function(e){wx.getNetworkType({success:function(t){"none"===t.networkType?e(new i.default(600)):e(new i.default(601))}})},extractErrorMsg:function(e){return 404===e.statusCode?"not found":e.data.error_msg||e.data.message||""},storage:{set:function(e,t){var n="";n="object"===(void 0===t?"undefined":r(t))?JSON.stringify(t):t.toString(),wx.setStorageSync(o.default.STORAGE_PREFIX_KEY+e,n)},get:function(e){return wx.getStorageSync(o.default.STORAGE_PREFIX_KEY+e)},remove:function(e){return wx.removeStorageSync(o.default.STORAGE_PREFIX_KEY+e)}},randomString:function(){return Math.random().toString(36).substring(2,10)},now:function(){return Math.floor(Date.now()/1e3)},checkPardon:function(t){var n=e.exports.storage.get(o.default.PARDON_TIME_KEY);return n?!((parseInt(n)||0)+o.default.PARDON_TIME<t)||(e.exports.storage.remove(o.default.PARDON_TIME_KEY),!1):(e.exports.storage.set(o.default.PARDON_TIME_KEY,t),!0)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLicense=function(){return(0,r.requestWithoutSign)({url:i.default.API_HOST+"/hserve/v1/license/?plugin_appid="+o.default.get("pluginId")+"&appid="+o.default.get("appId")})},t.reportUsage=function(){return Promise.resolve(!0)};var r=n(10),o=u(n(3)),i=u(n(0));function u(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=a(n(4)),i=a(n(0)),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(5));function a(e){return e&&e.__esModule?e:{default:e}}var c=["not_before","not_after","next_check","cooldown","plan_type","capabilities","userdata","status"],s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"updateInstance",value:function(e){var t=this;Object.keys(e).forEach(function(n){t[n]=e[n]});var n=o.default.now();this._isValid=this.not_after-n>=0}},{key:"getLicenseFromStorage",value:function(){var e=o.default.storage.get(i.default.LICENSE_STORAGE_KEY);if(e){var t=JSON.parse(e);return this.updateInstance(t),t}return null}},{key:"getLicenseFromServer",value:function(){var e=this;return u.getLicense().then(function(t){if(parseInt(t.statusCode)!==i.default.STATUS_CODE.SUCCESS)throw new Error(t.data);return o.default.storage.set(i.default.LAST_FETCH_TIME,Date.now()),e.updateInstance(t.data),e.saveToStorage(t.data),t.data})}},{key:"format",value:function(){var e=this,t={};return c.forEach(function(n){t[n]=e[n]}),t}},{key:"saveToStorage",value:function(e){o.default.storage.set(i.default.LICENSE_STORAGE_KEY,JSON.stringify(e))}},{key:"_updateAt",get:function(){return parseInt(o.default.storage.get(i.default.LAST_FETCH_TIME))}}]),e}();t.default=new s},function(e,t,n){"use strict";var r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"===("undefined"==typeof window?"undefined":o(window))&&(r=window)}e.exports=r},function(e,t,n){"use strict";var r,o,i=e.exports={};function u(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function c(e){if(r===setTimeout)return setTimeout(e,0);if((r===u||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:u}catch(e){r=u}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(e){o=a}}();var s,f=[],l=!1,h=-1;function d(){l&&s&&(l=!1,s.length?f=s.concat(f):h=-1,f.length&&p())}function p(){if(!l){var e=c(d);l=!0;for(var t=f.length;t;){for(s=f,f=[];++h<t;)s&&s[h].run();h=-1,t=f.length}s=null,l=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function y(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];f.push(new y(e,t)),1!==f.length||l||c(p)},y.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";(function(e,t,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(o,u){var a=[].slice,c="object"===("undefined"==typeof console?"undefined":r(console))&&null!==console,s=c&&"function"==typeof console.warn,f=c&&"function"==typeof console.error,l="undefined"!=typeof window?"":"[35m",h="undefined"!=typeof window?"":"[m";Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},s&&console.warn("Undefined: Object.keys")),Object.getOwnPropertyNames||(Object.getOwnPropertyNames=Object.keys,s&&console.warn("Undefined: Object.getOwnPropertyNames")),Array.prototype.reduce||(Array.prototype.reduce=function(e,t){var n=0;arguments.length<=1&&(t=this[n++]);for(var r=this.length;n<r;++n)t=e(t,this[n],n,this);return t},s&&console.warn("Undefined: Array.prototype.reduce"));var d={red:"31",green:"32",purple:"35",cyan:"36",yellow:"33"},p=Object.keys(d).reduce(function(e,t){return e[t]="object"===("undefined"==typeof window?"undefined":r(window))?function(e){return e}:function(e){return"["+d[t]+"m"+e+"[m"},e},{});function y(e){return e.stack||e}var g=function(e){if(!Object.defineProperty)return null;try{return Object.defineProperty(e,"prop",{value:"str"}),"str"===e.prop?Object.defineProperty:null}catch(e){return null}}({}),v=g?function(e,t,n){g(e,t,{value:n,writable:!0,configurable:!0})}:function(e,t,n){e[t]=n};Object.getPrototypeOf,Object.setPrototypeOf;var m="object"===(void 0===e?"undefined":r(e))&&e&&"function"==typeof e.nextTick?e.nextTick:"function"==typeof t?t:function(e){setTimeout(e,0)},b=function(){var e={head:void 0,tail:void 0},t=!1;function n(){for(var n;n=e.head;){e.head=n.chain,n.chain=void 0,e.head||(e.tail=void 0),(0,n.fn)(n.ctx)}t=!1}return function(r,o){var i={ctx:r,fn:o,chain:void 0};e.tail=e.tail?e.tail.chain=i:e.head=i,t||(t=!0,m(n))}}(),_=1,w=2,E=_|w,T=4,O=8,S=T|O,P=function(e,t){var n=e.constructor;function r(){v(this,"constructor",n)}for(var o in"function"==typeof this&&(r.prototype=this.prototype,n.prototype=new r),e)e.hasOwnProperty(o)&&!n.prototype.hasOwnProperty(o)&&v(n.prototype,o,e[o]);for(var o in t)t.hasOwnProperty(o)&&v(n,o,t[o]);return n}({constructor:function e(t){if(!(this instanceof e))throw new TypeError("new Promise!!!");var n=this;n.flag=0,n.result=void 0,n.tail=n.head=void 0;try{t(function(e){return R(n,e)},r)}catch(e){r(e)}return n;function r(e){return L(n,e)}},then:function(e,t){return new A(this,t,e)},catch:function(e){return new A(this,e,void 0)},toString:function(){return p.cyan("PromiseLight { ")+(this.flag&_?p.green(this.result):this.flag&w?p.red("<rejected> ["+this.result+"]"):p.yellow("<pending>"))+p.cyan(" }")},toJSON:function(){var e={class:"PromiseLight"};e.state=["pending","resolved","rejected"][this.flag&E],this.flag&_&&(e.value=this.result);this.flag&w&&(e.error=this.result);return e}},{all:function(e){Y(e)&&(e=G(e));if(!(e instanceof Array))throw new TypeError("promises must be an array");return new P(function(t,n){var r=e.length;if(0===r)return t([]);var o=Array(r);e.forEach(function(e,i){function u(e){o[i]=e,0==--r&&t(o)}if(K(e))return e.then(u,n);u(e)})})},race:function(e){Y(e)&&(e=G(e));if(!(e instanceof Array))throw new TypeError("promises must be an array");return new P(function(t,n){e.forEach(function(e){if(K(e))return e.then(t,n);t(e)})})},defer:function(){return new I},resolve:M,reject:function(e){return new j(e)},accept:M,convert:M,wrap:z,promisify:z,thunkify:q,promisifyAll:function(e,t){var n=[];if(Object.getOwnPropertyNames)n=Object.getOwnPropertyNames(e);else if(Object.keys)n=Object.keys(e);else for(var r in e)e.hasOwnProperty(r)&&n.push(i);return n.forEach(function(n){"function"!=typeof e[n]||e[n].promisified||e[n].thunkified||z(e,n,t)}),e},thunkifyAll:function(e,t){var n=[];if(Object.getOwnPropertyNames)n=Object.getOwnPropertyNames(e);else if(Object.keys)n=Object.keys(e);else for(var r in e)e.hasOwnProperty(r)&&n.push(i);return n.forEach(function(n){"function"!=typeof e[n]||e[n].promisified||e[n].thunkified||q(e,n,t)}),e},isIterable:H,isIterator:Y,isPromise:K,makeArrayFromIterator:G});function k(e){return this.flag=_,this.result=e,this.tail=this.head=void 0,this}function j(e){return this.flag=w,this.result=e,this.tail=this.head=void 0,b(this,C),this}function A(e,t,n){this.flag=0,this.result=void 0,this.tail=this.head=void 0;var r={rej:t,res:n,thunk:this,chain:void 0};return e.tail=e.tail?e.tail.chain=r:e.head=r,e.flag&E&&b(e,C),this}function I(){var e=this;return e.flag=0,e.result=void 0,e.tail=e.head=void 0,{promise:e,resolve:function(t){return R(e,t)},reject:function(t){return L(e,t)}}}function x(e){var t=this;return t.flag=0,t.result=void 0,t.tail=t.head=void 0,e.then(function(e){return R(t,e)},function(e){return L(t,e)}),t}function M(e){return K(e)?new x(e):new k(e)}function R(e,t){if(!(e.flag&E)){if(K(t))return t.then(function(t){return R(e,t)},function(t){return L(e,t)});e.result=t,e.flag=_,e.head&&b(e,C)}}function L(e,t){return e.flag&_?f&&console.error(p.yellow("* Resolved promise rejected: ")+e+"\n"+p.purple("* "+y(t))):e.flag&w?f&&console.error(p.yellow("* Rejected promise rejected: ")+e+"\n"+p.purple("* "+y(t))):(e.result="object"===(void 0===t?"undefined":r(t))&&t instanceof Error?t:Error(t),e.flag=w,void b(e,C))}function C(e){if(e.flag&E){if(e.flag&w)var t=e.result;else{var n=e.result;t=null}for(var r;r=e.head;)e.head=r.chain,r.chain=void 0,e.head||(e.tail=void 0),N(r.thunk,t,n,r.rej,r.res),(e.flag&S)===O&&D(e),e.flag|=T;e.flag===w&&b(e,U)}}function N(e,t,n,o,i){try{var u=t?o?o(t):t:i?i(n):n;F[void 0===u?"undefined":r(u)](e,u)}catch(t){L(e,t)}}k.prototype=P.prototype,j.prototype=P.prototype,A.prototype=P.prototype,I.prototype=P.prototype,x.prototype=P.prototype;var F={number:R,string:R,boolean:R,undefined:R,object:function(e,t){null===t?R(e,t):"function"==typeof t.then?t.then(function(t){return R(e,t)},function(t){return L(e,t)}):t instanceof Error?L(e,t):R(e,t)},function:function(e,t){"function"==typeof t.then?t.then(function(t){return R(e,t)},function(t){return L(e,t)}):t(function(){return function(e,t){switch(arguments.length){case 2:return e instanceof Error?L(this,e):R(this,t);case 1:return e instanceof Error?L(this,e):R(this,e);case 0:return R(this);default:return e instanceof Error?L(this,e):R(this,a.call(arguments,1))}}.apply(e,arguments)})}};function U(t){t.flag&S||function(t){t.flag|=O,"object"===(void 0===e?"undefined":r(e))&&e&&"function"==typeof e.on&&e.emit("unhandledRejection",t.result,t);f&&console.error(p.yellow("* UnhandledRejection: ")+t+p.purple("\n* "+y(t.result)))}(t)}function D(t){"object"===(void 0===e?"undefined":r(e))&&e&&"function"==typeof e.on&&e.emit("rejectionHandled",t),f&&console.error(p.green("* RejectionHandled:   ")+t)}function K(e){return("object"===(void 0===e?"undefined":r(e))&&!!e||"function"==typeof e)&&"function"==typeof e.then}function Y(e){return"object"===(void 0===e?"undefined":r(e))&&!!e&&("function"==typeof e.next||H(e))}function H(e){return"object"===(void 0===e?"undefined":r(e))&&!!e&&"function"==typeof Symbol&&!!Symbol.iterator&&"function"==typeof e[Symbol.iterator]}function G(e){if(e instanceof Array)return e;if(!Y(e))return[e];H(e)&&(e=e[Symbol.iterator]());var t=[];try{for(;;){var n=e.next();if(n&&n.hasOwnProperty("done")&&n.done)return t;n&&n.hasOwnProperty("value")&&(n=n.value),t.push(n)}}catch(e){return t}}function z(e,t){if(!e||"object"!==(void 0===e?"undefined":r(e))||!t||"string"!=typeof t){var n="function"!=typeof this?this:void 0;if("function"==typeof t&&(n=e,e=t,t=arguments[2]),t&&t.context&&(n=t.context),"function"!=typeof e)throw new TypeError("promisify: argument must be a function");return s.promisified=!0,s}var o=e,i=t,u=(t=arguments[2])&&"string"==typeof t?t:t&&"string"==typeof t.suffix?t.suffix:t&&"string"==typeof t.postfix?t.postfix:"Async",c=i+u+"Cached";function s(){var t=arguments;return new P(function(r,o){t[t.length++]=function(e,t){try{return e instanceof Error?o(e):2===arguments.length?e?o(e):r(t):1===arguments.length?r(arguments[0]):0===arguments.length?r():r(a.call(arguments,null==e?1:0))}catch(e){o(e)}},e.apply(n,t)})}Object.defineProperty(o,i+u,{get:function(){return this.hasOwnProperty(c)&&"function"==typeof this[c]?this[c]:(v(this,c,z(this,this[i])),this[c])},configurable:!0})}function q(e,t){if(!e||"object"!==(void 0===e?"undefined":r(e))||!t||"string"!=typeof t){var n="function"!=typeof this?this:void 0;if("function"==typeof t&&(n=e,e=t,t=arguments[2]),t&&t.context&&(n=t.context),"function"!=typeof e)throw new TypeError("thunkify: argument must be a function");return s.thunkified=!0,s}var o=e,i=t,u=(t=arguments[2])&&"string"==typeof t?t:t&&"string"==typeof t.suffix?t.suffix:t&&"string"==typeof t.postfix?t.postfix:"Async",c=i+u+"Cached";function s(){var t,r,o=[];return arguments[arguments.length++]=function(e,n){if(t)e&&f&&console.error(l+"Unhandled callback error: "+V(e)+h);else{t=arguments,0===o.length&&e instanceof Error&&(r=!0,f&&console.error(l+"Unhandled callback error: "+V(e)+h));for(var u=0,a=o.length;u<a;++u)i(o[u]);o=[]}},e.apply(n,arguments),function(e){if("function"!=typeof e)throw new TypeError("argument must be a function");if(r&&(r=!1,f&&console.error(l+"Unhandled callback error handled: "+V(t[0])+h)),t)return i(e);o.push(e)};function i(e){var r=t[0],o=t[1];try{return r instanceof Error||t.length===e.length?e.apply(n,t):2===t.length?e.call(n,r,o):1===t.length?e.call(n,null,t[0]):0===t.length?e.call(n):e.call(n,null,a.call(t,null==r?1:0))}catch(t){e.call(n,t)}}}Object.defineProperty(o,i+u,{get:function(){return this.hasOwnProperty(c)&&"function"==typeof this[c]?this[c]:(v(this,c,q(this,this[i])),this[c])},configurable:!0})}function V(e){return e.stack||e+""}o.Promise||(o.Promise=P),o.PromiseLight||(o.PromiseLight=P),v(P,"Promise",P),v(P,"PromiseLight",P),"object"===r(n)&&n&&n.exports&&(n.exports=P)}(Function("return this")(),"function"==typeof Promise&&Promise)}).call(this,n(8),n(19).setImmediate,n(17)(e))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LICENSE_EXPIRED_MSG=void 0,t.calculateSignature=h,t.innerRequest=d,t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.header,n=void 0===t?{}:t,i=e.forceSend;if(!(void 0!==i&&i||a.default._isValid||o.default.checkPardon(o.default.now())))return r.default.reject(new Error(l));var c=Object.assign(n,function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}({},u.default.SIGNATURE_KEY,h()));return d.call(this,Object.assign(e,{header:c}))},t.requestWithoutSign=function(e){return d.call(this,e)};var r=f(n(9)),o=f(n(4)),i=f(n(3)),u=f(n(0)),a=f(n(6)),c=n(15),s=f(n(14));function f(e){return e&&e.__esModule?e:{default:e}}var l=t.LICENSE_EXPIRED_MSG="license 已过期";function h(){var e=(0,c.btoa)(JSON.stringify(a.default.format())),t=o.default.randomString(),n=i.default.appId,r=i.default.secretKey;return JSON.stringify({appid:n,license:e,nonce:t,signature:(0,s.default)().update(n+e+r+t).digest("hex")})}function d(e){var t=e.url,n=e.method,i=void 0===n?"GET":n,u=e.data,a=void 0===u?{}:u,c=e.header,s=void 0===c?{}:c,f=e.dataType,l=void 0===f?"json":f,h=e.complete;e.forceSend;return new r.default(function(e,n){wx.request({method:i,url:t,data:a,header:s,dataType:l,success:function(t){e(t)},fail:function(){o.default.wxRequestFail(n)},complete:h})})}},function(e,t,n){"use strict";var r=n(2).rotr32;function o(e,t,n){return e&t^~e&n}function i(e,t,n){return e&t^e&n^t&n}function u(e,t,n){return e^t^n}t.ft_1=function(e,t,n,r){return 0===e?o(t,n,r):1===e||3===e?u(t,n,r):2===e?i(t,n,r):void 0},t.ch32=o,t.maj32=i,t.p32=u,t.s0_256=function(e){return r(e,2)^r(e,13)^r(e,22)},t.s1_256=function(e){return r(e,6)^r(e,11)^r(e,25)},t.g0_256=function(e){return r(e,7)^r(e,18)^e>>>3},t.g1_256=function(e){return r(e,17)^r(e,19)^e>>>10}},function(e,t,n){"use strict";var r=n(2),o=n(1);function i(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}t.BlockHash=i,i.prototype.update=function(e,t){if(e=r.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var n=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-n,e.length),0===this.pending.length&&(this.pending=null),e=r.join32(e,0,e.length-n,this.endian);for(var o=0;o<e.length;o+=this._delta32)this._update(e,o,o+this._delta32)}return this},i.prototype.digest=function(e){return this.update(this._pad()),o(null===this.pending),this._digest(e)},i.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,n=t-(e+this.padLength)%t,r=new Array(n+this.padLength);r[0]=128;for(var o=1;o<n;o++)r[o]=0;if(e<<=3,"big"===this.endian){for(var i=8;i<this.padLength;i++)r[o++]=0;r[o++]=0,r[o++]=0,r[o++]=0,r[o++]=0,r[o++]=e>>>24&255,r[o++]=e>>>16&255,r[o++]=e>>>8&255,r[o++]=255&e}else for(r[o++]=255&e,r[o++]=e>>>8&255,r[o++]=e>>>16&255,r[o++]=e>>>24&255,r[o++]=0,r[o++]=0,r[o++]=0,r[o++]=0,i=8;i<this.padLength;i++)r[o++]=0;return r}},function(e,t,n){"use strict";"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){"use strict";var r=n(2),o=n(12),i=n(11),u=n(1),a=r.sum32,c=r.sum32_4,s=r.sum32_5,f=i.ch32,l=i.maj32,h=i.s0_256,d=i.s1_256,p=i.g0_256,y=i.g1_256,g=o.BlockHash,v=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function m(){if(!(this instanceof m))return new m;g.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=v,this.W=new Array(64)}r.inherits(m,g),e.exports=m,m.blockSize=512,m.outSize=256,m.hmacStrength=192,m.padLength=64,m.prototype._update=function(e,t){for(var n=this.W,r=0;r<16;r++)n[r]=e[t+r];for(;r<n.length;r++)n[r]=c(y(n[r-2]),n[r-7],p(n[r-15]),n[r-16]);var o=this.h[0],i=this.h[1],g=this.h[2],v=this.h[3],m=this.h[4],b=this.h[5],_=this.h[6],w=this.h[7];for(u(this.k.length===n.length),r=0;r<n.length;r++){var E=s(w,d(m),f(m,b,_),this.k[r],n[r]),T=a(h(o),l(o,i,g));w=_,_=b,b=m,m=a(v,E),v=g,g=i,i=o,o=a(E,T)}this.h[0]=a(this.h[0],o),this.h[1]=a(this.h[1],i),this.h[2]=a(this.h[2],g),this.h[3]=a(this.h[3],v),this.h[4]=a(this.h[4],m),this.h[5]=a(this.h[5],b),this.h[6]=a(this.h[6],_),this.h[7]=a(this.h[7],w)},m.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},function(e,t,n){"use strict";!function(){var e=t,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function r(e){this.message=e}r.prototype=new Error,r.prototype.name="InvalidCharacterError",e.btoa||(e.btoa=function(e){for(var t,o,i=String(e),u=0,a=n,c="";i.charAt(0|u)||(a="=",u%1);c+=a.charAt(63&t>>8-u%1*8)){if((o=i.charCodeAt(u+=.75))>255)throw new r("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");t=t<<8|o}return c}),e.atob||(e.atob=function(e){var t=String(e).replace(/[=]+$/,"");if(t.length%4==1)throw new r("'atob' failed: The string to be decoded is not correctly encoded.");for(var o,i,u=0,a=0,c="";i=t.charAt(a++);~i&&(o=u%4?64*o+i:i,u++%4)?c+=String.fromCharCode(255&o>>(-2*u&6)):0)i=n.indexOf(i);return c})}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=new Error;return r.code=t,r.message=n?t+": "+n:t+": "+this.mapErrorMessage(t),r}return r(e,[{key:"mapErrorMessage",value:function(e){switch(e){case 600:return"network disconnected";case 601:return"request timeout";default:return"unknown error"}}}]),e}();t.default=o},function(e,t,n){"use strict";e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";(function(e,t){!function(e,n){if(!e.setImmediate){var r,o,i,u,a,c=1,s={},f=!1,l=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick(function(){p(e)})}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){p(e.data)},r=function(e){i.port2.postMessage(e)}):l&&"onreadystatechange"in l.createElement("script")?(o=l.documentElement,r=function(e){var t=l.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,o.removeChild(t),t=null},o.appendChild(t)}):r=function(e){setTimeout(p,0,e)}:(u="setImmediate$"+Math.random()+"$",a=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(u)&&p(+t.data.slice(u.length))},e.addEventListener?e.addEventListener("message",a,!1):e.attachEvent("onmessage",a),r=function(t){e.postMessage(u+t,"*")}),h.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var o={callback:e,args:t};return s[c]=o,r(c),c++},h.clearImmediate=d}function d(e){delete s[e]}function p(e){if(f)setTimeout(p,0,e);else{var t=s[e];if(t){f=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{d(e),f=!1}}}}}("undefined"==typeof self?void 0===e?void 0:e:self)}).call(this,n(7),n(8))},function(e,t,n){"use strict";(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function i(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new i(o.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new i(o.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(18),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||void 0,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||void 0}).call(this,n(7))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PluginSDK=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=l(n(10)),i=l(n(6)),u=n(9),a=l(n(3)),c=l(n(4)),s=l(n(0)),f=n(5);function l(e){return e&&e.__esModule?e:{default:e}}var h=t.PluginSDK=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.deferred=(0,u.defer)(),this._license=i.default}return r(e,[{key:"init",value:function(e){for(var t=this,n=["appId","pluginId","secretKey","version"],r=0;r<n.length;r++){var o=e[n[r]];if(!o)throw new Error("need param "+n[r]);a.default.set(n[r],o)}var u=i.default.getLicenseFromStorage(),c=Promise.resolve();return u||(c=i.default.getLicenseFromServer()),c.then(function(){return(0,f.reportUsage)()}).then(function(){return t._isReachNextCheck().then(function(){return t.deferred.resolve()})})}},{key:"isValid",value:function(){var e=this;return this.deferred.promise.then(function(){return!!e._license._isValid&&e._isReachNextCheck().then(function(){return e._isExpired()})})}},{key:"request",value:function(){return o.default.apply(this,arguments)}},{key:"updateLicense",value:function(){var e=this;return this.deferred.promise.then(function(){if(!(e._license._updateAt+e._license.cooldown>(new Date).getTime()))return i.default.getLicenseFromServer();i.default.getLicenseFromStorage()})}},{key:"getLicense",value:function(){return this._isReachNextCheck()}},{key:"getPlanType",value:function(){return this._license.planType}},{key:"isPaidPlan",value:function(){var e=this._license.planType;return e===s.default.PLAN_TYPE.COMMERCIAL||e===s.default.PLAN_TYPE.FREEMIUM}},{key:"haveCapability",value:function(){return null}},{key:"getUserData",value:function(){return null}},{key:"_isReachNextCheck",value:function(){var e=c.default.now();return this._license.next_check&&parseInt(this._license.next_check)-e<=0?i.default.getLicenseFromServer():Promise.resolve(this._license.format())}},{key:"_isExpired",value:function(){var e=c.default.now();return this._license.not_after>=e?(c.default.storage.remove(s.default.PARDON_TIME_KEY),!0):!!c.default.checkPardon(e)||(this._license._isValid=!1,!1)}}]),e}();e.exports=new h}]);
//# sourceMappingURL=sdk-v1.0.0.js.map